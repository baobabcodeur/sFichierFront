{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\FCS\\\\Desktop\\\\mes projets\\\\S-fichierFront\\\\src\\\\components\\\\Discussion\\\\Discussion.jsx\",\n  _s = $RefreshSig$();\nimport \"./Discussion.css\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Discussion({\n  selectedGroup\n}) {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [files, setFiles] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [file, setFile] = useState(null);\n  const [userName, setUserName] = useState('');\n  const [loading, setLoading] = useState(false);\n  const authId = localStorage.getItem('user_id');\n  const fileInputRef = useRef(null);\n  const messagesEndRef = useRef(null);\n\n  // Fonction pour récupérer les messages\n  const fetchMessages = async () => {\n    if (!selectedGroup) return;\n    try {\n      const token = localStorage.getItem('auth_token');\n      const response = await axios.get(`http://192.168.1.160:8000/api/groups/${selectedGroup.id}/messages`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setMessages(response.data || []);\n    } catch (error) {\n      console.error('Erreur lors de la récupération des messages :', error);\n    }\n  };\n\n  // Fonction pour récupérer les fichiers\n  const fetchFiles = async () => {\n    if (!selectedGroup) return;\n    try {\n      const token = localStorage.getItem('auth_token');\n      const response = await axios.get(`http://192.168.1.160:8000/api/groups/${selectedGroup.id}/files`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setFiles(response.data.files || []);\n    } catch (error) {\n      console.error('Erreur lors de la récupération des fichiers :', error);\n    }\n  };\n\n  // Récupérer le nom de l'utilisateur\n  const fetchUserName = async () => {\n    try {\n      const token = localStorage.getItem('auth_token');\n      const response = await axios.get('http://192.168.1.160:8000/api/user', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setUserName(response.data.name);\n    } catch (error) {\n      console.error('Erreur lors de la récupération du nom de l\\'utilisateur :', error);\n    }\n  };\n\n  // Charger les messages et fichiers au démarrage\n  useEffect(() => {\n    if (selectedGroup) {\n      fetchUserName();\n      fetchMessages();\n      fetchFiles();\n    }\n  }, [selectedGroup]);\n\n  // Mettre en place un intervalle pour charger les messages et fichiers toutes les 5 secondes\n  useEffect(() => {\n    if (selectedGroup) {\n      const intervalId = setInterval(() => {\n        fetchMessages();\n        fetchFiles();\n      }, 5000); // Intervalle de 5 secondes\n\n      // Nettoyage de l'intervalle à la fin\n      return () => clearInterval(intervalId);\n    }\n  }, [selectedGroup]);\n\n  // Défilement automatique vers le bas de la discussion lors de l'ajout de nouveaux messages\n  useEffect(() => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({\n        behavior: 'smooth'\n      });\n    }\n  }, [messages]);\n\n  // Fonction pour envoyer un message ou un fichier\n  const sendMessage = async () => {\n    const token = localStorage.getItem('auth_token');\n    if (!newMessage.trim() && !file) return;\n    setLoading(true); // Activer le chargement avant l'envoi\n\n    try {\n      const formData = new FormData();\n      if (newMessage.trim() && file) {\n        formData.append('content', newMessage);\n        formData.append('file', file);\n        const response = await axios.post(`http://192.168.1.160:8000/api/groups/${selectedGroup.id}/messages`, formData, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        const newMessageData = {\n          ...response.data.message,\n          user: {\n            id: authId,\n            name: userName\n          },\n          file: response.data.message.file || null\n        };\n        setMessages(prevMessages => [...prevMessages, newMessageData]);\n      } else if (file) {\n        formData.append('file', file);\n        const response = await axios.post(`http://192.168.1.160:8000/api/groups/${selectedGroup.id}/files`, formData, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        const newFileMessage = {\n          user: {\n            id: authId,\n            name: userName\n          },\n          content: '',\n          file: {\n            url: `http://192.168.1.160:8000/${response.data.file.path}`,\n            name: file.name\n          },\n          created_at: new Date().toISOString()\n        };\n        setMessages(prevMessages => [...prevMessages, newFileMessage]);\n      } else if (newMessage.trim()) {\n        formData.append('content', newMessage);\n        const response = await axios.post(`http://192.168.1.160:8000/api/groups/${selectedGroup.id}/messages`, formData, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        const newMessageData = {\n          ...response.data.message,\n          user: {\n            id: authId,\n            name: userName\n          }\n        };\n        setMessages(prevMessages => [...prevMessages, newMessageData]);\n      }\n      setNewMessage('');\n      setFile(null);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (error) {\n      console.error('Erreur lors de l\\'envoi du message ou du fichier :', error);\n    } finally {\n      setLoading(false); // Désactiver le chargement après l'envoi\n    }\n  };\n\n  // Combiner messages et fichiers dans un tableau unique\n  const combineMessagesAndFiles = () => {\n    const combined = [...messages, ...files.map(file => ({\n      id: file.id,\n      user: {\n        id: file.user_id,\n        name: file.user.name\n      },\n      content: '',\n      file: {\n        url: `http://192.168.1.160:8000/${file.path}`,\n        name: file.path.split('/').pop()\n      },\n      created_at: file.created_at\n    }))];\n    combined.sort((a, b) => new Date(a.created_at) - new Date(b.created_at));\n    return combined;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"discussion\",\n    children: selectedGroup ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: selectedGroup.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: selectedGroup.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages-container\",\n        children: [combineMessagesAndFiles().length > 0 ? combineMessagesAndFiles().map(message => {\n          var _message$file;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `message ${message.user.name === userName ? 'messageE' : 'messageR'}`,\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: message.user ? message.user.name : 'Utilisateur inconnu'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this), \":\", message.content ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [message.content, message.file && /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: message.file.url,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  download: message.file.name,\n                  children: message.file.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true) : message.file && /*#__PURE__*/_jsxDEV(\"a\", {\n              href: message.file.url,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              download: message.file.name,\n              children: message.file.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: new Date(message.created_at).toLocaleString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 17\n            }, this)]\n          }, message.id || ((_message$file = message.file) === null || _message$file === void 0 ? void 0 : _message$file.url), true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this);\n        }) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Aucun message dans ce groupe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-inputs\",\n        children: loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Envoi en cours...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 29\n        }, this) // Indicateur de chargement\n        : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: newMessage,\n            onChange: e => setNewMessage(e.target.value),\n            placeholder: \"\\xC9crire un message...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            ref: fileInputRef,\n            onChange: e => setFile(e.target.files[0])\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: sendMessage,\n            children: \"Envoyer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"S\\xE9lectionnez un groupe pour afficher la discussion\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 9\n  }, this);\n}\n_s(Discussion, \"z3YC+rhPi+EszY0rJwR0HLV3gcw=\");\n_c = Discussion;\nvar _c;\n$RefreshReg$(_c, \"Discussion\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","Discussion","selectedGroup","_s","messages","setMessages","files","setFiles","newMessage","setNewMessage","file","setFile","userName","setUserName","loading","setLoading","authId","localStorage","getItem","fileInputRef","messagesEndRef","fetchMessages","token","response","get","id","headers","data","error","console","fetchFiles","fetchUserName","name","intervalId","setInterval","clearInterval","current","scrollIntoView","behavior","sendMessage","trim","formData","FormData","append","post","newMessageData","message","user","prevMessages","newFileMessage","content","url","path","created_at","Date","toISOString","value","combineMessagesAndFiles","combined","map","user_id","split","pop","sort","a","b","className","children","fileName","_jsxFileName","lineNumber","columnNumber","description","length","_message$file","href","target","rel","download","toLocaleString","ref","type","onChange","e","placeholder","onClick","_c","$RefreshReg$"],"sources":["C:/Users/FCS/Desktop/mes projets/S-fichierFront/src/components/Discussion/Discussion.jsx"],"sourcesContent":["import \"./Discussion.css\";\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default function Discussion({ selectedGroup }) {\r\n    const [messages, setMessages] = useState([]);\r\n    const [files, setFiles] = useState([]); \r\n    const [newMessage, setNewMessage] = useState('');\r\n    const [file, setFile] = useState(null);\r\n    const [userName, setUserName] = useState('');\r\n    const [loading, setLoading] = useState(false); \r\n    const authId = localStorage.getItem('user_id');\r\n    const fileInputRef = useRef(null);\r\n    const messagesEndRef = useRef(null);\r\n\r\n    // Fonction pour récupérer les messages\r\n    const fetchMessages = async () => {\r\n        if (!selectedGroup) return;\r\n        try {\r\n            const token = localStorage.getItem('auth_token');\r\n            const response = await axios.get(`http://192.168.1.160:8000/api/groups/${selectedGroup.id}/messages`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            });\r\n            setMessages(response.data || []);\r\n        } catch (error) {\r\n            console.error('Erreur lors de la récupération des messages :', error);\r\n        }\r\n    };\r\n\r\n    // Fonction pour récupérer les fichiers\r\n    const fetchFiles = async () => {\r\n        if (!selectedGroup) return;\r\n        try {\r\n            const token = localStorage.getItem('auth_token');\r\n            const response = await axios.get(`http://192.168.1.160:8000/api/groups/${selectedGroup.id}/files`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            });\r\n            setFiles(response.data.files || []); \r\n        } catch (error) {\r\n            console.error('Erreur lors de la récupération des fichiers :', error);\r\n        }\r\n    };\r\n\r\n    // Récupérer le nom de l'utilisateur\r\n    const fetchUserName = async () => {\r\n        try {\r\n            const token = localStorage.getItem('auth_token');\r\n            const response = await axios.get('http://192.168.1.160:8000/api/user', {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            });\r\n            setUserName(response.data.name);\r\n        } catch (error) {\r\n            console.error('Erreur lors de la récupération du nom de l\\'utilisateur :', error);\r\n        }\r\n    };\r\n\r\n    // Charger les messages et fichiers au démarrage\r\n    useEffect(() => {\r\n        if (selectedGroup) {\r\n            fetchUserName(); \r\n            fetchMessages();  \r\n            fetchFiles(); \r\n        }\r\n    }, [selectedGroup]);\r\n\r\n    // Mettre en place un intervalle pour charger les messages et fichiers toutes les 5 secondes\r\n    useEffect(() => {\r\n        if (selectedGroup) {\r\n            const intervalId = setInterval(() => {\r\n                fetchMessages();\r\n                fetchFiles();\r\n            }, 5000); // Intervalle de 5 secondes\r\n\r\n            // Nettoyage de l'intervalle à la fin\r\n            return () => clearInterval(intervalId);\r\n        }\r\n    }, [selectedGroup]);\r\n\r\n    // Défilement automatique vers le bas de la discussion lors de l'ajout de nouveaux messages\r\n    useEffect(() => {\r\n        if (messagesEndRef.current) {\r\n            messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\r\n        }\r\n    }, [messages]);\r\n\r\n    // Fonction pour envoyer un message ou un fichier\r\n    const sendMessage = async () => {\r\n        const token = localStorage.getItem('auth_token');\r\n        \r\n        if (!newMessage.trim() && !file) return;\r\n\r\n        setLoading(true); // Activer le chargement avant l'envoi\r\n\r\n        try {\r\n            const formData = new FormData();\r\n\r\n            if (newMessage.trim() && file) {\r\n                formData.append('content', newMessage);\r\n                formData.append('file', file);\r\n\r\n                const response = await axios.post(`http://192.168.1.160:8000/api/groups/${selectedGroup.id}/messages`, formData, {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${token}`,\r\n                        'Content-Type': 'multipart/form-data',\r\n                    },\r\n                });\r\n\r\n                const newMessageData = {\r\n                    ...response.data.message,\r\n                    user: {\r\n                        id: authId,\r\n                        name: userName,\r\n                    },\r\n                    file: response.data.message.file || null\r\n                };\r\n\r\n                setMessages(prevMessages => [...prevMessages, newMessageData]);\r\n\r\n            } else if (file) {\r\n                formData.append('file', file);\r\n\r\n                const response = await axios.post(`http://192.168.1.160:8000/api/groups/${selectedGroup.id}/files`, formData, {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${token}`,\r\n                        'Content-Type': 'multipart/form-data',\r\n                    },\r\n                });\r\n\r\n                const newFileMessage = {\r\n                    user: {\r\n                        id: authId,\r\n                        name: userName,\r\n                    },\r\n                    content: '', \r\n                    file: {\r\n                        url: `http://192.168.1.160:8000/${response.data.file.path}`, \r\n                        name: file.name, \r\n                    },\r\n                    created_at: new Date().toISOString(),\r\n                };\r\n                setMessages(prevMessages => [...prevMessages, newFileMessage]);\r\n            } else if (newMessage.trim()) {\r\n                formData.append('content', newMessage);\r\n\r\n                const response = await axios.post(`http://192.168.1.160:8000/api/groups/${selectedGroup.id}/messages`, formData, {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${token}`,\r\n                        'Content-Type': 'multipart/form-data',\r\n                    },\r\n                });\r\n\r\n                const newMessageData = {\r\n                    ...response.data.message,\r\n                    user: {\r\n                        id: authId,\r\n                        name: userName,\r\n                    },\r\n                };\r\n                setMessages(prevMessages => [...prevMessages, newMessageData]);\r\n            }\r\n\r\n            setNewMessage('');\r\n            setFile(null);\r\n            if (fileInputRef.current) {\r\n                fileInputRef.current.value = '';\r\n            }\r\n        } catch (error) {\r\n            console.error('Erreur lors de l\\'envoi du message ou du fichier :', error);\r\n        } finally {\r\n            setLoading(false); // Désactiver le chargement après l'envoi\r\n        }\r\n    };\r\n\r\n    // Combiner messages et fichiers dans un tableau unique\r\n    const combineMessagesAndFiles = () => {\r\n        const combined = [...messages, ...files.map(file => ({\r\n            id: file.id,\r\n            user: { id: file.user_id, name: file.user.name }, \r\n            content: '', \r\n            file: {\r\n                url: `http://192.168.1.160:8000/${file.path}`,\r\n                name: file.path.split('/').pop(), \r\n            },\r\n            created_at: file.created_at,\r\n        }))];\r\n\r\n        combined.sort((a, b) => new Date(a.created_at) - new Date(b.created_at));\r\n\r\n        return combined;\r\n    };\r\n\r\n\r\n    \r\n\r\n    return (\r\n        <div className=\"discussion\">\r\n            {selectedGroup ? (\r\n                <>\r\n                    <div>\r\n                        <h5>{selectedGroup.name}</h5>\r\n                        <p>{selectedGroup.description}</p>\r\n                    </div>\r\n                    <div className=\"messages-container\">\r\n    {combineMessagesAndFiles().length > 0 ? (\r\n        combineMessagesAndFiles().map((message) => (\r\n            <div\r\n                key={message.id || message.file?.url}\r\n                className={`message ${message.user.name === userName ? 'messageE' : 'messageR'}`}\r\n            >\r\n                <strong>{message.user ? message.user.name : 'Utilisateur inconnu'}</strong>:\r\n                {message.content ? (\r\n                    <>\r\n                        {message.content}\r\n                        {message.file && (\r\n                            <div>\r\n                                <a href={message.file.url} \r\n                                   target=\"_blank\" \r\n                                   rel=\"noopener noreferrer\" \r\n                                   download={message.file.name}>\r\n                                   {message.file.name}\r\n                                </a>\r\n                            </div>\r\n                        )}\r\n                    </>\r\n                ) : (\r\n                    message.file && (\r\n                        <a href={message.file.url} \r\n                           target=\"_blank\" \r\n                           rel=\"noopener noreferrer\" \r\n                           download={message.file.name}>\r\n                            {message.file.name}\r\n                        </a>\r\n                    )\r\n                )}\r\n                <span>{new Date(message.created_at).toLocaleString()}</span>\r\n            </div>\r\n        ))\r\n    ) : (\r\n        <p>Aucun message dans ce groupe</p>\r\n    )}\r\n    <div ref={messagesEndRef} /> \r\n</div>\r\n\r\n                    <div className=\"message-inputs\">\r\n                        {loading ? (\r\n                            <p>Envoi en cours...</p> // Indicateur de chargement\r\n                        ) : (\r\n                            <>\r\n                                <input \r\n                                    type=\"text\" \r\n                                    value={newMessage}\r\n                                    onChange={(e) => setNewMessage(e.target.value)} \r\n                                    placeholder=\"Écrire un message...\" \r\n                                />\r\n                                <input \r\n                                    type=\"file\" \r\n                                    ref={fileInputRef}\r\n                                    onChange={(e) => setFile(e.target.files[0])} \r\n                                />\r\n                                <button onClick={sendMessage}>Envoyer</button>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                </>\r\n            ) : (\r\n                <p>Sélectionnez un groupe pour afficher la discussion</p>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}